<!DOCTYPE html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
		<link rel="stylesheet" href="main.css">
	</head>
	<body>
		<div id="header">
			<h1>Hi, I'm Yu-Hang Hung</h1>
			
			<h3>Email: 345genius@gmail.com</h3>
			<h3>Facebook: <a href="https://www.facebook.com/yuhang.hung.31" target="_blank">洪佑杭</a></h3>
			<h3>GitHub: <a href="https://github.com/hungyuhang" target="_blank">hungyuhang</a></h3>
		</div>
		<div id="body">
			
			<br>
			<br>
			<h2>ABOUT</h2>
			<hr>
			<p>
				
				I am passionate about coding, and I like to learn new things!
				Maybe I'm not the best student in the class, but I'll do my best to make my skills better.
				
			</p>
			
			<br><br>
			<h2>EDUCATION</h2>
			<hr>
			<p>National Cheng Kung University</p>
			<br><br>
			<h2>GALLERY</h2>
			<hr>
			<br><br><br>
			
		</div>
		<div id="container">
		
			<br><br><br><br>
			
			<div id="back_card_container">
				<div id="pic_container">
					<div style="height:150px;width:180px;position:absolute;top:150px;left:-300px;"></div>
					<img id="pic1">
					<img id="pic2">
					<img id="pic0">
					<div style="height:150px;width:180px;position:absolute;top:150px;left:300px;"></div>
				</div>
				<div id="back_card" class="object">
					<p id="card_title">hello</p>
				</div>
			</div>
			<br>
			<div id="button_container">
				
				<div id="button_front">
					<div id="button_text_left">Prev<p id="button_next_title_left">(none)</p></div>
					<div id="button_leftside"><img src="icon_left.png" class="icon_btn" style="left:0px;"></div>
					<div id="button_rightside"><img src="icon_right.png" class="icon_btn" style="right:0px;"></div>
					<div id="button_text_right">Next<p id="button_next_title_right">(none)</p></div>
				</div>
				<div id="button_back">
				</div>
			</div>
		
		</div>
		<br><br><br>
		
		<script>
			
			var front_button_status = "left";
			var btn_angle = -3;
			var pic_number = 3;
			var pic_title = ["Porsche", "Ferrari", "Lamborghini"];
			var pic_primary_color = ["#FFDE59", "#E68E8E", "#B2FFB2"];
			
			var current_pic_container = 1;
			var pic_showing = 0; // leftmost picture (index = 0)
			document.getElementById("button_front").style.transform = 
				"rotate(" + btn_angle + "deg)";
			document.getElementById("button_back").style.transform = 
				"rotate(" + -1*btn_angle + "deg)";
			document.getElementById("card_title").innerHTML = 
				pic_title[pic_showing];
			document.getElementById("pic1").src = 
				(pic_showing + 1) + ".jpg";
			setButtonText(
				document.getElementById("button_next_title_left"),
				document.getElementById("button_next_title_right")
			);
			document.getElementById("container").style.backgroundColor = 
				pic_primary_color[pic_showing];
			
			$("#button_leftside").click(function(){
				var front = document.getElementById("button_front");
				var back = document.getElementById("button_back");
				
				if(front_button_status === "right"){
					buttonLoop(front, btn_angle, -1*btn_angle, 0, 0);
					buttonLoop(back, -1*btn_angle, btn_angle, 0, 0);
					btn_angle *= -1;
					front_button_status = "left";
				} else {
					buttonLoop(front, btn_angle, btn_angle, 0, -1);
					buttonLoop(back, -1*btn_angle, -1*btn_angle, 0, 1);
				}
				picChange("left");
				setButtonText(
					document.getElementById("button_next_title_left"),
					document.getElementById("button_next_title_right")
				);
			}); 
			
			$("#button_rightside").click(function(){
				var front = document.getElementById("button_front");
				var back = document.getElementById("button_back");
				
				if(front_button_status === "right"){
					buttonLoop(front, btn_angle, btn_angle, 0, 1);
					buttonLoop(back, -1*btn_angle, -1*btn_angle, 0, -1);
				} else {
					buttonLoop(front, btn_angle, -1*btn_angle, 0, 0);
					buttonLoop(back, -1*btn_angle, btn_angle, 0, 0);
					btn_angle *= -1;
					front_button_status = "right";
				}
				picChange("right");
				setButtonText(
					document.getElementById("button_next_title_left"),
					document.getElementById("button_next_title_right")
				);
			}); 
			
			function buttonLoop(obj, pos, pos_end, time, speed) {
				
				if(time > 17) {
					obj.style.transform = "rotate(" + pos_end + "deg)";
					return;
				}
				setTimeout(function(){ 
					obj.style.transform = "rotate(" + pos + "deg)";
					var pos_old = pos;
					pos += 0.2*(pos_end - pos) + (0.9 * speed / (time*0.03 + 1));
					speed = pos - pos_old;
					time++;
					buttonLoop(obj, pos, pos_end, time, speed);
				}, 30);
			}
			
			function picChange(pic_to_change) {
				var middle_container = 
					document.getElementById("pic" + current_pic_container);
				var right_container = 
					document.getElementById("pic" + (current_pic_container + 2) % 3);
				var left_container = 
					document.getElementById("pic" + (current_pic_container + 1) % 3);
				var back_card = document.getElementById("back_card");
					
				if(pic_to_change === "left"){
					if(pic_showing === 0){ // now showing the leftmost pic, 
						
					}else{
						pic_showing--;
						left_container.src = (pic_showing + 1) + ".jpg";
						middle_container.style.animation = 
							"move_downright 400ms ease 1 forwards";
						left_container.style.animation = 
							"move_upright 400ms ease 1 forwards";
						right_container.style.left = "-300px";
						
						current_pic_container = (current_pic_container + 1) % 3;
						
						backCardSpinLoop(1, back_card, 0, 0);
						$("#container").animate({
							backgroundColor: pic_primary_color[pic_showing]
						});
					}
					
				}else if (pic_to_change === "right"){
					if(pic_showing === pic_number - 1){ // now showing the rightmost pic, 
						
					}else{
						pic_showing++;
						//right_container.getElementsByTagName("img")[0].src = (pic_showing + 1) + ".jpg";
						right_container.src = (pic_showing + 1) + ".jpg";
						middle_container.style.animation = 
							"move_downleft 400ms ease 1 forwards";
						right_container.style.animation = 
							"move_upleft 400ms ease 1 forwards";
						left_container.style.left = "300px";
						
						current_pic_container = (current_pic_container + 2) % 3;
						
						backCardSpinLoop(-1, back_card, 0, 0);
						$("#container").animate({
							backgroundColor: pic_primary_color[pic_showing]
						});
					}
				}
			}
			
			function picChangeLoop(obj, x, y, time) {
				// x = 1, go right; x = -1, go left
				// y = 1, go down; y = -1, go up
				if(time > 100) {
					return;
				}
				setTimeout(function(){ 
					obj.style.top += 1*Math.sin(1.57/time);
					obj.style.left += 2;
					picChangeLoop(obj, x, y, time);
					time++;
				}, 30);
			}
			
			function backCardSpinLoop(direction, obj, time, degree) {
				
				if(time > 20) {
					return;
				}
				setTimeout(function(){ 
					obj.style.transform = "rotateY(" + direction*degree*9 + "deg)";
					if(time === 10){// halfway
						obj.getElementsByTagName("p")[0].innerHTML = pic_title[pic_showing];
						degree *= -1;
					}
					time++;
					degree++;
					backCardSpinLoop(direction, obj, time, degree);
				}, 12);
			}
			
			function setButtonText(obj_left, obj_right) {
				if(pic_number <= 1){
					obj_left.innerHTML = "(none)";
					obj_right.innerHTML = "(none)";
					return;
				}
				if(pic_showing === 0){
					obj_left.innerHTML = "(none)";
					obj_right.innerHTML = pic_title[pic_showing + 1];
				}else if(pic_showing === (pic_number - 1)){
					obj_left.innerHTML = pic_title[pic_showing - 1];
					obj_right.innerHTML = "(none)";
				}else{
					obj_left.innerHTML = pic_title[pic_showing - 1];
					obj_right.innerHTML = pic_title[pic_showing + 1];
				}
			}
			
			
		</script>
		
	</body>
</html>
